(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97754fb2"],{"377f":function(t,e,i){"use strict";i("c792")},"51eb":function(t,e,i){"use strict";var a=i("825a"),r=i("485a"),n=TypeError;t.exports=function(t){if(a(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw n("Incorrect hint");return r(this,t)}},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("b64b"),i("a4d3"),i("4de4"),i("d3b7"),i("e439"),i("14d9"),i("159b"),i("dbb4");var a=i("ade3");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},6005:function(t,e,i){"use strict";i("e54e")},8172:function(t,e,i){var a=i("e065"),r=i("57b9");a("toPrimitive"),r()},"864b":function(t,e,i){"use strict";i("9911");var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.value,"append-to-body":""},on:{close:t.cancel},scopedSlots:t._u([{key:"title",fn:function(){return[e("header",[t._v(t._s(t.title))])]},proxy:!0},{key:"footer",fn:function(){return[e("el-button",{attrs:{size:"medium"},on:{click:t.cancel}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.confirm}},[t._v("确认")])]},proxy:!0}])},[e("main",{staticClass:"u-form"},[e("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[e("el-form-item",{attrs:{label:"日期",required:"",error:t.dateError}},[e("div",{staticClass:"m-date"},[e("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入年份",min:2009,max:t.maxYear,size:"medium"},model:{value:t.form.year,callback:function(e){t.$set(t.form,"year",t._n(e))},expression:"form.year"}}),e("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入月份",min:1,max:12,size:"medium"},model:{value:t.form.month,callback:function(e){t.$set(t.form,"month",t._n(e))},expression:"form.month"}}),e("el-input-number",{staticClass:"u-date",attrs:{placeholder:"请输入日期",min:1,max:31,size:"medium"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",t._n(e))},expression:"form.date"}})],1)]),e("el-form-item",{attrs:{label:"类型",required:""}},[e("div",{staticClass:"m-type"},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",t._n(e))},expression:"form.type"}},[e("el-radio-button",{attrs:{label:1}},[t._v("事件")]),e("el-radio-button",{attrs:{label:2}},[t._v("活动")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:2===t.form.type,expression:"form.type === 2"}],staticClass:"m-type-icon"},[e("el-input",{attrs:{size:"small",placeholder:"图标ID",minlength:1,maxlength:10,max:3e4,min:0},model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",t._n(e))},expression:"form.icon"}},[e("template",{slot:"prepend"},[e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(t.form.icon)}})])],2)],1)],1)]),e("el-form-item",{attrs:{label:"描述",required:"",error:t.descError}},[e("el-input",{attrs:{type:"textarea",rows:8,placeholder:"输入事件描述"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),e("el-form-item",{attrs:{label:"客户端",required:""}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.client,callback:function(e){t.$set(t.form,"client",e)},expression:"form.client"}},[e("el-radio-button",{attrs:{label:"std"}},[t._v("正式服")]),e("el-radio-button",{attrs:{label:"origin"}},[t._v("怀旧服")]),1==t.form.type?e("el-radio-button",{attrs:{label:"all"}},[t._v("双端")]):t._e()],1)],1),e("el-form-item",{attrs:{label:"参考资料"}},[t._l(t.form.link,(function(i,a){return[e("div",{key:i.id||a,staticClass:"m-links"},[e("el-input",{staticClass:"u-link-item",attrs:{placeholder:"请输入标题"},model:{value:i.label,callback:function(e){t.$set(i,"label",e)},expression:"item.label"}}),e("el-input",{staticClass:"u-link-item",attrs:{placeholder:"请输入链接"},model:{value:i.url,callback:function(e){t.$set(i,"url",e)},expression:"item.url"}}),e("el-button",{staticClass:"u-del-icon",attrs:{type:"text",icon:"el-icon-circle-close",title:"删除参考资料"},on:{click:function(e){return t.removeLink(a)}}})],1)]})),e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus",disabled:t.addDisabled},on:{click:t.addLink}},[t._v("添加")])],2),t.isEditor&&t.isEditmode?[e("el-divider",[e("i",{staticClass:"el-icon-coordinate"}),t._v(" 管理设置")]),e("el-form-item",{attrs:{label:"格子显示"}},[e("el-radio-group",{attrs:{size:"small"},model:{value:t.form.is_top,callback:function(e){t.$set(t.form,"is_top",t._n(e))},expression:"form.is_top"}},[e("el-radio-button",{attrs:{label:0}},[t._v("否")]),e("el-radio-button",{attrs:{label:1}},[t._v("是")])],1)],1),t.form.is_top?e("el-form-item",{attrs:{label:"格子简述"}},[e("el-input",{attrs:{type:"input",placeholder:"输入简述（非必填）"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1):t._e(),e("el-form-item",{attrs:{label:"重要级别"}},[e("el-input-number",{attrs:{size:"medium",min:0,max:5},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",t._n(e))},expression:"form.level"}})],1),e("el-form-item",{attrs:{label:"样式"}},[e("div",{staticClass:"m-style"},[e("div",{staticClass:"m-color-item"},[e("label",{staticClass:"u-label"},[t._v("背景色")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.form.bgcolor,expression:"form.bgcolor"}],staticClass:"u-color-value"},[t._v("【"+t._s(t.form.bgcolor)+"】")]),e("el-color-picker",{attrs:{size:"small",predefine:t.predefineColors},model:{value:t.form.bgcolor,callback:function(e){t.$set(t.form,"bgcolor",e)},expression:"form.bgcolor"}})],1),e("div",{staticClass:"m-color-item"},[e("label",{staticClass:"u-label"},[t._v("颜色")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.form.color,expression:"form.color"}],staticClass:"u-color-value"},[t._v("【"+t._s(t.form.color)+"】")]),e("el-color-picker",{attrs:{size:"small",predefine:t.predefineColors},model:{value:t.form.color,callback:function(e){t.$set(t.form,"color",e)},expression:"form.color"}})],1)])]),e("el-form-item",{attrs:{label:"图片"}},[e("img-upload",{attrs:{data:t.form.img,filed:"img"},on:{update:t.setMeta}})],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{size:"medium",placeholder:"请输入备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),e("el-form-item",{attrs:{label:"操作"}},[e("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small",type:"warning"},on:{click:t.recheck}},[t._v("复审")]),e("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger"},on:{click:t.del}},[t._v("删除")])],1)]:t._e()],2)],1)])},r=[],n=i("5530"),o=(i("caad"),i("2532"),i("14d9"),i("a434"),i("d3b7"),i("3675")),s=i("c9d2"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-banner"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.url,"show-file-list":!1,"on-success":t.done,"on-error":t.fail,"with-credentials":"",accept:"image/jpg,image/jpeg,image/gif,image/png,image/bmp"}},[t.banner?e("img",{attrs:{src:t._f("showBanner")(t.banner)}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("el-button",{staticClass:"u-remove",attrs:{type:"info",size:"mini",icon:"el-icon-circle-close"},on:{click:t.clearBanner}},[t._v("移除图片")])],1)},c=[],u=(i("b64b"),i("99af"),i("65c2")),d=i("85e4"),m=u["__cms"],f=m+"api/cms/upload",p={name:"post_banner",props:["filed","data"],data:function(){return{banner:this.data,url:f}},model:{prop:"data",event:"update"},watch:{data:function(t){this.banner=t},banner:function(t){this.$emit("update",{key:this.filed,val:t})}},methods:{done:function(t,e){this.banner=(null===t||void 0===t?void 0:t.data[0])||""},fail:function(t,e,i){try{var a=JSON.parse(t.message);this.$message.error("[".concat(a.code,"]").concat(a.msg))}catch(r){this.$message.error("网络请求异常")}},clearBanner:function(){this.banner=""}},filters:{showBanner:d["showBanner"]}},b=p,v=(i("a3f0"),i("2877")),h=Object(v["a"])(b,l,c,!1,null,null,null),g=h.exports,_=i("b288"),y={year:2022,month:3,date:16,type:1,desc:"",client:location.href.includes("origin")?"origin":"std",link:[],is_top:0,level:0,remark:"",banner:"",bgcolor:"",color:"",img:"",style:"",icon:0},k={name:"calendar_dialog",components:{"img-upload":g},props:["value","dateObj","selected","mode","isSuper"],data:function(){return{form:Object(n["a"])({},Object.assign({},y,this.dateObj)),dateError:"",descError:"",loading:!1,predefineColors:_}},computed:{isEditmode:function(){return"update"==this.mode},title:function(){return this.isEditmode?"编辑":"新增"},maxYear:function(){return(new Date).getFullYear()+1},addDisabled:function(){var t,e;return(null===(t=this.form)||void 0===t||null===(e=t.link)||void 0===e?void 0:e.length)>=10},isEditor:function(){return s["a"].isEditor()}},watch:{selected:{deep:!0,immediate:!0,handler:function(t){t?(this.form=t,this.form.link||(this.form.link=[],this.form.link.push({label:"官网新闻",url:t.link_temp}))):this.form=Object.assign({},y,this.dateObj)}},dateObj:{deep:!0,handler:function(t){t&&(this.form=Object(n["a"])(Object(n["a"])({},this.form),t||{}))}}},methods:{addLink:function(){var t,e;null===(t=this.form)||void 0===t||null===(e=t.link)||void 0===e||e.push({url:"",label:"",id:+new Date})},removeLink:function(t){var e,i;null===(e=this.form)||void 0===e||null===(i=e.link)||void 0===i||i.splice(t,1)},validate:function(){if(this.form){var t=this.form,e=t.year,i=t.month,a=t.date,r=t.desc;e?(this.dateError="",this.dateError=i?a?"":"请输入日期":"请输入月份"):this.dateError="请输入年份",this.descError=r?"":"请输入事件描述"}},reset:function(){this.$emit("input",!1),this.form=Object.assign({},y,this.dateObj),this.dateError="",this.descError=""},cancel:function(){this.$emit("input",!1)},confirm:function(){var t=this;if(this.validate(),!this.descError&&!this.dateError){this.loading=!0;var e=this.isEditmode?this.put:this.post;e().then((function(){t.reset()})).finally((function(){t.loading=!1}))}},post:function(){var t=this;return Object(o["a"])(this.form).then((function(e){t.$notify({title:"提交成功",message:"请耐心等待审核",type:"success"}),t.$emit("update",e),t.reset()}))},put:function(){var t=this,e=this.isSuper?o["j"]:o["k"];return e(this.selected.id,this.form).then((function(e){t.$emit("update"),t.reset()})).then((function(){t.isSuper?t.$notify({title:"操作成功",message:"日历记录更新成功",type:"success"}):t.$notify({title:"提交成功",message:"请等待重新审核",type:"success"})}))},del:function(){var t=this;Object(o["b"])(this.selected.id).then((function(){t.$emit("del",t.selected.id),t.$notify({type:"success",title:"删除成功",message:"日历记录已删除"})}))},recheck:function(){var t=this;Object(o["j"])(this.selected.id,{status:0}).then((function(){t.$notify({type:"success",title:"操作成功",message:"日历记录已设为待审核"}),t.$emit("del",t.selected.id)}))},setMeta:function(t){var e=t.key,i=t.val;this.form[e]=i},iconLink:d["iconLink"]}},C=k,w=(i("6005"),Object(v["a"])(C,a,r,!1,null,null,null));e["a"]=w.exports},a3f0:function(t,e,i){"use strict";i("dde4")},ade3:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var a=i("53ca");i("8172"),i("efec"),i("a4d3"),i("e01a"),i("d3b7"),i("d9e2"),i("a9e3");function r(t,e){if("object"!==Object(a["a"])(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==Object(a["a"])(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function n(t){var e=r(t,"string");return"symbol"===Object(a["a"])(e)?e:String(e)}function o(t,e,i){return e=n(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},b288:function(t){t.exports=JSON.parse('["#ffffff","#ff3399","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#9933ff"]')},c792:function(t,e,i){},cc1b:function(t,e,i){"use strict";i("fb6a");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-calendar-detail-item",on:{click:function(e){return t.view(t.data.id)}}},[e("div",{staticClass:"u-primary",attrs:{to:"/view/".concat(t.data.id)}},[2==t.data.type?e("img",{staticClass:"u-icon",attrs:{src:t.iconLink(t.data.icon)}}):e("a",{staticClass:"u-author",attrs:{target:"_blank",href:t.authorLink(t.data.user_id),title:"由".concat(t.data.user_info.display_name,"贡献")},on:{click:function(t){t.stopPropagation()}}},[t.data&&t.data.user_info?e("img",{staticClass:"u-avatar",attrs:{src:t.showAvatar(t.data.user_info.user_avatar),alt:t.data.user_info.display_name}}):t._e()]),e("span",{staticClass:"u-desc"},[1==t.data.type?e("i",{staticClass:"u-client",class:t.data.client},[t._v(t._s(t.getClientLabel(t.data.client).slice(0,1)))]):t._e(),t.data.is_top?e("i",{staticClass:"u-star"},[t._v("⭐️")]):t._e(),e("span",{style:t.descStyle(t.data)},[t._v(t._s(t.data.desc))])])]),e("div",{staticClass:"u-actions"},[e("span",{staticClass:"u-action u-comment"},[e("i",{staticClass:"u-comment-icon el-icon-chat-dot-round"}),e("span",{staticClass:"u-comment-count"},[t._v("评论"),e("em",{staticClass:"u-count"},[t._v("("+t._s(t.data.comments_count||0)+")")])])]),e("span",{staticClass:"u-action u-reference"},[e("i",{staticClass:"u-reference-icon el-icon-connection"}),e("span",{staticClass:"u-reference-count"},[t._v("参考资料"),e("span",{staticClass:"u-count"},[t._v("("+t._s(t.getRefCount(t.data))+")")])])]),t.isEditor?e("span",{staticClass:"u-action u-edit",on:{click:function(e){return e.stopPropagation(),t.edit(t.data)}}},[e("i",{staticClass:"el-icon-edit-outline"}),e("span",{staticClass:"u-edit-text"},[t._v("编辑")])]):t._e()])])},r=[],n=(i("14d9"),i("9911"),i("85e4")),o=i("c9d2"),s=i("65c2"),l={name:"CalendarDetailItem",props:["type","data"],components:{},data:function(){return{}},computed:{isEditor:function(){return o["a"].isEditor()}},watch:{},methods:{view:function(t){this.$router.push("/view/".concat(t))},edit:function(t){this.$emit("edit",t)},authorLink:n["authorLink"],iconLink:n["iconLink"],showAvatar:n["showAvatar"],descStyle:function(t){var e=t.color;return e?{color:e,fontWeight:"bold"}:{}},getRefCount:function(t){var e;return null!==(e=t.link)&&void 0!==e&&e.length?t.link.length:t.link_temp?1:0},getClientLabel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"std";return s["__clients"][t]}}},c=l,u=(i("377f"),i("2877")),d=Object(u["a"])(c,a,r,!1,null,null,null);e["a"]=d.exports},dbb4:function(t,e,i){var a=i("23e7"),r=i("83ab"),n=i("56ef"),o=i("fc6a"),s=i("06cf"),l=i("8418");a({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,i,a=o(t),r=s.f,c=n(a),u={},d=0;while(c.length>d)i=r(a,e=c[d++]),void 0!==i&&l(u,e,i);return u}})},dde4:function(t,e,i){},e439:function(t,e,i){var a=i("23e7"),r=i("d039"),n=i("fc6a"),o=i("06cf").f,s=i("83ab"),l=!s||r((function(){o(1)}));a({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(n(t),e)}})},e54e:function(t,e,i){},efec:function(t,e,i){var a=i("1a2d"),r=i("cb2d"),n=i("51eb"),o=i("b622"),s=o("toPrimitive"),l=Date.prototype;a(l,s)||r(l,s,n)}}]);
//# sourceMappingURL=chunk-97754fb2.987d8247.js.map