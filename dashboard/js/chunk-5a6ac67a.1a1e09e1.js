(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a6ac67a"],{"46e8":function(t,e,a){"use strict";a.d(e,"l",(function(){return u})),a.d(e,"e",(function(){return o})),a.d(e,"j",(function(){return f})),a.d(e,"k",(function(){return v})),a.d(e,"h",(function(){return g})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return b})),a.d(e,"g",(function(){return h})),a.d(e,"i",(function(){return j})),a.d(e,"c",(function(){return O})),a.d(e,"m",(function(){return l})),a.d(e,"d",(function(){return d})),a.d(e,"f",(function(){return m}));var r=a("41cb"),n=a("bc3a"),i=a.n(n),c=a("65c2"),s=Object(r["$_https"])("server",{proxy:!1});function o(){return Object(r["$cms"])().get("/api/cms/user/my/profile")}function u(t){return Object(r["$cms"])().put("/api/cms/user/my/profile",t)}function f(t){return Object(r["$cms"])().put("/api/cms/user/my/avatar",t)}function l(t){return Object(r["$cms"])().post("/api/cms/upload/avatar",t)}function d(){var t=c["__imgPath"]+"avatar/index.json";return i.a.get(t)}function m(t){return Object(r["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function v(t){return s.post("profile/password",t)}function b(){return s.get("profile/email/check")}function p(t){return s.get("profile/email/available",{params:{user_email:t}})}function h(t){return s.post("profile/email/bind",t)}function g(){return s.post("profile/email/verify")}function O(){return Object(r["$cms"])().get("/api/cms/account/oauth/status")}function j(t){return Object(r["$cms"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}},"51eb":function(t,e,a){"use strict";var r=a("825a"),n=a("485a"),i=TypeError;t.exports=function(t){if(r(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw i("Incorrect hint");return n(this,t)}},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("14d9"),a("159b"),a("dbb4");var r=a("ade3");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},8172:function(t,e,a){var r=a("e065"),n=a("57b9");r("toPrimitive"),n()},8221:function(t,e,a){"use strict";a("9143")},9143:function(t,e,a){},"9be6":function(t,e,a){"use strict";a.r(e);a("b0c0");var r=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-frame m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-frame"},[e("div",{staticClass:"m-frame-left"},[e("a",{staticClass:"u-btn el-button el-button--default el-button--mini is-plain",attrs:{href:"/dashboard/avatar",target:"_blank"}},[e("i",{staticClass:"el-icon-picture-outline-round"}),t._v(" 修改头像")]),e("div",{staticClass:"u-avatar-box"},[e("div",{staticClass:"u-avatar"},[e("img",{staticClass:"u-avatar-pic",attrs:{src:t.showAvatar(t.avatar)}}),t.frame?e("i",{staticClass:"u-avatar-frame"},[e("img",{attrs:{src:t.frameUrl(t.frame)}})]):t._e()])])]),e("div",{staticClass:"m-frame-right"},[e("div",{staticClass:"u-theme"},[e("div",{staticClass:"u-frame-list"},[e("div",{staticClass:"u-title"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v("头像框")]),e("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=avatar",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),e("div",{staticClass:"u-frame-item"},t._l(t.frameList,(function(a,r){return e("div",{key:r,staticClass:"u-picbox"},[e("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(a.desc)),e("br"),t._v(t._s(a.postscript))]),e("div",{staticClass:"u-pic",class:t.setClass(a),on:{click:function(e){return t.setAvatar(a)}}},[a.name?e("el-image",{attrs:{src:t.frameUrl(a.name),fit:"contain"}}):e("div",{staticClass:"u-noFrame"})],1)])],1)})),0)])])])]),e("div",{staticClass:"m-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.updateAvatarFrame}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},n=[],i=a("5530"),c=(a("99af"),a("d81d"),a("7db0"),a("d3b7"),a("4de4"),a("159b"),a("14d9"),a("b64b"),a("b547")),s=a("46c1"),o=a("c9d2"),u=a("85e4"),f=a("65c2"),l=a("46e8"),d=a("aa38"),m=(a("2ef0"),{name:"frame",props:[],data:function(){return{tabList:s["d"],uid:o["a"].getInfo().uid,frameList:[],framebak:"",framesBak:{},avatar:o["a"].getInfo().avatar_origin,frame:null,frames:{},avatars:[],decoration:null}},computed:{},methods:{reset:function(){this.frame=this.framebak,this.frames=this.framesBak,this.dataProcessing()},frameUrl:function(t){if(t)return f["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")},showAvatar:function(t){return Object(u["showAvatar"])(t,600)},setClass:function(t){return t.decoration&&t.receive?"receive":t.isHave?t.using?"select":void 0:"noHave"},updateAvatarFrame:function(){var t=this;Object(d["g"])({user_avatar_frame:this.frame}).then((function(e){t.$message({message:"头像框更新成功",type:"success"});var a=t.frameList.map((function(t){return{val:t.name,using:t.using,type:"avatar"}}));Object(d["f"])(a)}))},receiveFrame:function(t){var e=this;Object(d["e"])(this.uid,t).then((function(t){e.$message({message:"领取成功",type:"success"}),e.loadDecoration()}))},setAvatar:function(t){if(t.decoration&&t.receive)this.receiveFrame(t.name);else if(t.isHave){var e=this.frameList,a=e.find((function(t){return 1==t.using}));a&&(a.using=0),1==t.using?t.using=0:t.using=1,this.frame=t.name}},load:function(){var t=this;Object(l["f"])(this.uid).then((function(e){t.frame=e.data.data.user_avatar_frame||"",t.framebak=e.data.data.user_avatar_frame||""})),Object(l["d"])().then((function(e){t.frames=e.data,t.framesBak=e.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(d["a"])().then((function(e){var a=e.data.data,r=["atcard","homebg","sidebar","calendar"],n=a.filter((function(t){return""!=t.type&&-1!=r.indexOf(t.type)}));t.decoration=t.formattingData(n,"val"),t.avatars=a.filter((function(t){return"avatar"==t.type})),t.dataProcessing()}))},formattingData:function(t,e){var a={};return t.forEach((function(t,r){a[t[e]]?a[t[e]].push(t):a[t[e]]=[t]})),a},decorationAather:function(t){var e,a=["atcard","homebg","sidebar","calendar"],r=null===(e=this.decoration[t])||void 0===e?void 0:e.filter((function(t){return""!=t.type&&-1!=a.indexOf(t.type)}));return(null===r||void 0===r?void 0:r.length)>=4},dataProcessing:function(){var t=this,e=this.avatars||[],a=this.frames,r=[{desc:"无边框",name:"",val:"",isHave:1,using:1}],n=[],c=[];Object.keys(a).forEach((function(s,o){var u=Object(i["a"])(Object(i["a"])({},a[s]),{isHave:0,using:0,receive:!1}),f=e.find((function(t){return t.val==s}));f?(u.using=f.using,u.isHave=1,u.using&&(r[0].using=0)):u.decoration&&(u.receive=t.decorationAather(u.name)),u.isHave?r.push(u):u.decoration?n.push(u):c.push(u)})),this.frameList=[].concat(r,n,c)}},mounted:function(){this.load()},components:{uc:c["a"]}}),v=m,b=(a("8221"),a("2877")),p=Object(b["a"])(v,r,n,!1,null,null,null);e["default"]=p.exports},aa38:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return u})),a.d(e,"c",(function(){return f})),a.d(e,"e",(function(){return l})),a.d(e,"g",(function(){return d})),a.d(e,"d",(function(){return m}));a("99af");var r=a("41cb"),n=a("bc3a"),i=a.n(n),c=a("65c2");function s(t){return Object(r["$cms"])().get("/api/cms/user/decoration",{params:t})}function o(t){return Object(r["$cms"])().post("/api/cms/user/decoration",t)}function u(){var t=c["__imgPath"]+"decoration/index.json";return i.a.get(t)}function f(){return i.a.get("".concat(c["__dataPath"],"emotion/output/catalog.json"))}function l(t,e){return Object(r["$cms"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function d(t){return Object(r["$cms"])().put("/api/cms/user/my/avatar-frame",t)}function m(){return i.a.get("".concat(c["__imgPath"],"decoration/honor.json"))}},ade3:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var r=a("53ca");a("8172"),a("efec"),a("a4d3"),a("e01a"),a("d3b7"),a("d9e2"),a("a9e3");function n(t,e){if("object"!==Object(r["a"])(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==Object(r["a"])(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function i(t){var e=n(t,"string");return"symbol"===Object(r["a"])(e)?e:String(e)}function c(t,e,a){return e=i(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},dbb4:function(t,e,a){var r=a("23e7"),n=a("83ab"),i=a("56ef"),c=a("fc6a"),s=a("06cf"),o=a("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,r=c(t),n=s.f,u=i(r),f={},l=0;while(u.length>l)a=n(r,e=u[l++]),void 0!==a&&o(f,e,a);return f}})},e439:function(t,e,a){var r=a("23e7"),n=a("d039"),i=a("fc6a"),c=a("06cf").f,s=a("83ab"),o=!s||n((function(){c(1)}));r({target:"Object",stat:!0,forced:o,sham:!s},{getOwnPropertyDescriptor:function(t,e){return c(i(t),e)}})},efec:function(t,e,a){var r=a("1a2d"),n=a("cb2d"),i=a("51eb"),c=a("b622"),s=c("toPrimitive"),o=Date.prototype;r(o,s)||n(o,s,i)}}]);
//# sourceMappingURL=chunk-5a6ac67a.1a1e09e1.js.map