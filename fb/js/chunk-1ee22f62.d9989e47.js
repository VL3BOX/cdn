(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee22f62","chunk-398db36a"],{"095a":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-fb-story"},[t.data&&t.data.length?i("el-tabs",{attrs:{type:"card"},model:{value:t.map_id,callback:function(i){t.map_id=i},expression:"map_id"}},[t._l(t.data,(function(s){return i("el-tab-pane",{key:s.MapID,attrs:{label:t.$t(s.Layer3Name),name:String(s.MapID)}},[i("div",{staticClass:"m-story-basic"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.$t("基本信息")))]),i("el-descriptions",{attrs:{column:3,border:""}},[i("el-descriptions-item",{attrs:{label:t.$t("名称")}},[t._v(t._s(t.$th(s.OtherName)))]),i("el-descriptions-item",{attrs:{label:t.$t("地图ID")}},[t._v(t._s(s.MapID))]),i("el-descriptions-item",{attrs:{label:t.$t("资料片")}},[t._v("Level."+t._s(s.DivideLevel)+"／"+t._s(t.$th(s.DivideName))+"／"+t._s(t.$th(s.VersionName)))]),i("el-descriptions-item",{attrs:{label:t.$t("最低等级要求")}},[t._v(t._s(s.MinLevel))]),i("el-descriptions-item",{attrs:{label:t.$t("入口"),span:2}},[t._v(t._s(t.$th(s.EnterWay)))]),i("el-descriptions-item",{attrs:{label:t.$t("简介")}},[t._v(t._s(t.formatIntroduction(s.Introduction)))])],1)],1),i("div",{staticClass:"m-story-boss"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.$t("首领传说")))]),t.boss_list&&t.boss_list.length?i("div",{staticClass:"u-list"},t._l(t.boss_list,(function(s,a){return i("div",{key:a,staticClass:"u-boss"},[i("h5",{staticClass:"u-name"},[i("svg",{class:"u-boss-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"833.7",height:"833.7",viewBox:"0 0 833.7 833.7","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[i("path",{attrs:{d:"M416.8 0C208.5.1 39.6 169 39.6 377.399V555.2c0 9.399 4.4 18.199 11.9 23.899L213.7 702.2v101.5c0 16.6 13.4 30 30 30h24.1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19h2c10.5 0 19 8.5 19 19v41.2c0 16.6 13.4 30 30 30h1c16.6 0 30-13.4 30-30v-41.2c0-10.5 8.5-19 19-19s19 8.5 19 19v41.2c0 16.6 13.4 30 30 30H590c16.6 0 30-13.4 30-30V702.1L782.2 579c7.5-5.7 11.899-14.5 11.899-23.9V377.3C794 169 625.1.1 416.8 0zM259.1 558.1c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104s104 46.601 104 104c0 57.5-46.6 104-104 104zm187.3 76.5h-59.1c-13.7 0-22.4-14.7-15.8-26.7l29.6-53.699c6.8-12.4 24.7-12.4 31.5 0l29.601 53.699c6.5 11.999-2.201 26.7-15.801 26.7zm128.1-76.5c-57.4 0-104-46.6-104-104 0-57.399 46.6-104 104-104 57.399 0 104 46.601 104 104 0 57.5-46.5 104-104 104z"}})]),t._v(" "+t._s(t.$th(s.BOSS))+" ")]),i("p",{staticClass:"u-boss-detail",domProps:{innerHTML:t._s(s.Introduce)}}),i("el-button",{staticClass:"u-boss-more",attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-key"},on:{click:function(i){return t.loadSkills(s)}}},[t._v(t._s(t.skill_list[s.NPCID]?t.skill_status[s.NPCID]?t.$t("收起"):t.$t("展开"):t.$t("查看技能")))]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.skill_status[s.NPCID],expression:"skill_status[boss.NPCID]"}],staticClass:"u-boss-skills"},[t.skill_list[s.NPCID]?t._l(t.skill_list[s.NPCID],(function(s){return i("div",{key:s.idkey,staticClass:"u-skill"},[i("h6",{staticClass:"u-skill-name"},[t._v("※ "+t._s(t.$th(s.SkillName)))]),i("div",{staticClass:"u-skill-desc"},[t._v(t._s(t.$th(s.Desc)))])])})):i("div",{staticClass:"u-skill-null"},[i("i",{staticClass:"el-icon-warning-outline"}),t._v(" "+t._s(t.$t("没有相关信息"))+" ")])],2)],1)})),0):t._e()],1)])})),i("el-tab-pane",{attrs:{label:t.$t("副本地图")}},[i("fb-map")],1)],2):i("el-alert",{attrs:{title:"未找到相关信息",type:"info","show-icon":""}})],1)},n=[],e=(s("d3b7"),s("a15b"),s("12cb")),l=s("6d6e"),o=s("65c2"),r=s("41cb"),c=Object(r["$node"])();function d(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";return c.get("/fb/info",{params:{name:t,client:i}})}function u(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";return c.get("/fb/boss",{params:{MapID:t,client:i}})}function p(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"std";return c.get("/fb/skills",{params:{skills:t,client:i}})}var m=s("85e4"),f=s("4bb4"),v={name:"Story",components:{fbMap:f["default"]},props:[],data:function(){return{loading:!1,map_id:"",data:"",boss_list:"",skill_list:{},skill_status:{}}},computed:{fb:function(){return this.$route.query.fb_name||this.$store.state.default_fb},client:function(){return this.$store.state.client},map_cover:function(){return o["__ossMirror"]+"pic/map/map_"+this.mapid+"_0.png"}},methods:{$t:e["a"],$th:l["translate"],loadData:function(){var t=this;this.loading=!0,d(this.fb,this.client).then((function(i){var s,a;(t.data=(null===i||void 0===i?void 0:i.data)||[],t.map_id)||(t.map_id=String(null===(s=t.data)||void 0===s||null===(a=s[0])||void 0===a?void 0:a["MapID"]));return t.map_id})).finally((function(){t.loading=!1}))},loadSkills:function(t){var i=this,s=null===t||void 0===t?void 0:t.NPCID;if(this.skill_list[s])this.skill_status[s]=!this.skill_status[s],this.$forceUpdate();else{var a=[t.Step1Skill,t.Step2Skill,t.Step3Skill,t.Step4Skill,t.szStep5Skill];a=_.compact(a),a=a.join(";"),this.loading=!0,p(a,this.client).then((function(t){i.skill_list[s]=(null===t||void 0===t?void 0:t.data)||[],i.skill_status[s]=!0,i.$forceUpdate()})).finally((function(){i.loading=!1}))}},formatIntroduction:function(t){var i,s;return null===(i=Object(m["extractTextContent"])(t))||void 0===i||null===(s=i[0])||void 0===s?void 0:s.text}},watch:{fb:function(){this.loadData()},map_id:function(t){var i=this;t&&(this.loading=!0,u(t,this.client).then((function(t){i.boss_list=(null===t||void 0===t?void 0:t.data)||[]})).finally((function(){i.loading=!1})))},"$route.query.map_id":{immediate:!0,handler:function(t){t&&(this.map_id=t)}}},mounted:function(){this.loadData()}},h=v,b=(s("c7a1"),s("2877")),k=Object(b["a"])(h,a,n,!1,null,null,null);i["default"]=k.exports},"4bb4":function(t,i,s){"use strict";s.r(i);var a=function(){var t=this,i=t._self._c;return t.maptree?i("div",{staticClass:"m-fb-map"},t._l(t.maplist,(function(s){return i("img",{key:s,ref:"fb_map_img",refInFor:!0,staticClass:"u-map",attrs:{src:t.mapLink(t.mapid,s),alt:t.fb}})})),0):t._e()},n=[],e=s("65c2"),l=s("bc3a"),o=s.n(l);function r(){return o.a.get(e["__dataPath"]+"map/data/map_tree.json")}var c={name:"JMap",props:[],data:function(){return{loading:!0}},computed:{fb:function(){return this.$store.state.fb||this.$store.state.default_fb},dungeons:function(){return this.$store.getters.dungeons},mapid:function(){var t;return null===(t=this.dungeons)||void 0===t?void 0:t[this.fb]["maps"][0]["map_id"]},maplist:function(){return this.maptree[this.mapid]},maptree:function(){return this.$store.state.maptree}},watch:{mapid:function(t){}},methods:{loaded:function(){this.loading=!1},mapLink:function(t,i){return e["__imgPath"]+"map/maps/map_"+t+"_"+i+".png"}},mounted:function(){var t=this;r().then((function(i){t.$store.state.maptree=i.data}))}},d=c,u=(s("6a14"),s("2877")),p=Object(u["a"])(d,a,n,!1,null,null,null);i["default"]=p.exports},"6a14":function(t,i,s){"use strict";s("cb1a")},"8bdd":function(t,i,s){},c7a1:function(t,i,s){"use strict";s("8bdd")},cb1a:function(t,i,s){}}]);
//# sourceMappingURL=chunk-1ee22f62.d9989e47.js.map